# 一、ThinkPHP

## 1.1、如何理解TP中的单一入口文件？

1. ThinkPHP采用单一入口模式，进行项目部署和访问，无论完成什么功能，一个项目都有一个统一（但不一定是唯一）的入口，所有项目都有一个入口文件，入口文件主要功能如下：
   - 定义框架路径、项目路径和项目名词。
   - 定义调试模式和运行模式的相关常量
   - 载入框架入口文件
2. **运行机制：**TP采用，入口、调度、响应、三层结构，入口是指用户接受到请求的部分，调度是指如何处理请求部分，响应是指向客户端发送结果部分，具体来水，当用户发出一个请求时，入口程序会接收到这个请求，根据配置文件解析URL。找到对应的控制器和动作，并其交给调度器处理，调度器负责加载相应的模型，执行业务逻辑，然后将结果返回给响应器，最后响应结果发给客户端。

## 1.2、ThinkPHP的核心架构？

1. 核心架构主要由三大部分组成：核心层、行为层和服务层。
   - **核心层：**框架基础，提供基本的HTTP请求处理、路由分发、模板引擎等功能。
   - **行为层：**提供了一些常用的行为，如日志记录、图片处理、验证码等。
   - **服务层：**业务逻辑的具体实现，可以单独采用开发和复用。

## 1.3、ThinkPHP中的MVC分层是什么？

1. MVC是一种将应用程序的逻辑层和表现层进行分离的方法，ThinkPHP叶基于MVC设计模式，MVC是一个抽象的概念，并没有明确的规定，ThinkPHP中的MVC也大致体现在：
   - **模型（M）：**模型定义由Model类完成。
   - **控制器（C）：**应用控制器（核心控制器App类）和Action控制器都承担了控制器的角色，Action控制器完成业务过程控制，而应用控制器负责调度控制。
   - **视图（V）：**由View类和模板文件组成，模板做到了100%分离，可以独立预览和制作。

## 1.4、在ThinkPHP中如何防止SQL注入、XSS攻击和CSRF攻击？

1. **SQL注入：**
   - 使用ORM框架来构建安全的SQL语句，避免手动拼接SQL；
   - 对用户输入进行严格的类型和长度校验，并过滤特殊字符。
   - 尽可能降低用户数据库的权限，只赋予必要的操作权限。
   - 开启防火墙软件，阻止恶意IP访问。
2. **XSS注入：**
   - 在输出 HTML 代码之前，使用 htmlspecialchars 或者 htmlentities 函数转义特殊字符；
   - 使用 HTTPOnly 标志保护 cookie 不被 JavaScript 脚本读取；
   - 开启 Content-Security-Policy 头部控制资源加载行为，防止恶意脚本注入。
3. **CSRF攻击：**
   - 在表单中添加一个随机生成且难以猜测的Token参数，验证提交过来的数据。
   - 使用 HTTP Referer 头部检查请求来源是否合法；
   - 设置 cookie 的 SameSite 属性为 strict 或 lax ，限制第三方网站发送跨域请求。
4. **加密敏感信息：**
   - 使用SSL/TLS协议加密通信过程中的数据。
   - 使用加密算法AES或RSA等对敏感信息如密码和私人数据进行加密存储。
   - 使用安全哈希函数如bcrypt和scrypt加盐hash用户密码。

## 1.5、在ThinkPHP中，如何实现复杂的数据关联查询和数据库优化？

1. **数据关联查询：**
   - 使用模型的关联实现一对多，一对一等关联查询；
   - 使用Join、union和subquery复杂的关联查询。
2. **数据库优化：**
   - 使用ThinkORM的缓存机制，把频繁访问的结构存储到缓存中；
   - 合理设计和建议索引加速查询速度；
   - 避免在WHERE字句中使用！=或<>操作符，这样可能导致无法有效使用索引；
   - 减少数据库查询次数，尽量使用join查询代替子查询和循环查询；
   - 对数据库查询进行 EXPLAIN 分析，检查是否选择了最优的查询计划；
   - 使用 limit 关键字限制返回的数据量，减少不必要的计算和传输；
   - 注意 SQL 语句格式的规范性，避免语法错误导致的查询失败；
   - 对数据库服务器进行定期维护和监控，确保其稳定性和可用性。

## 1.6、ThinkPHP的核心特性有哪些？

- **MVC架构：**清晰的分层结构，便于维护和拓展。
- **路由功能：**灵活的路由规则，支持多种URL模式。
- **内置验证：**提供丰富的验证规则和验证机制。
- **事件机制：**支持应用事件和行为拓展。
- **Restful支持：**简化API开发。

## 1.7、ThinkPHP的事件机制是什么？

- ThinkPHP的事件机制允许开发在应用特定时刻触发和监听事件，事件可以通过事件类来实现，用于拓展应用功能，例如应用启动时执行，（Event）。

## 1.8、ThinkPHP的中间件机制时什么？

- 中间件是ThinkPHP中用于处理HTTP请求和相应的中间处理层，中间件可以在请求达到控制器之前或者响应返回客户端之前执行，用于验证，日志和跨域处理，中间件可以全局注册针对特定的路由使用。

## 1.9、ThinkPHP8和7有什么区别？

- **PHP版本：**8支持8.0新特性，7不支持。
- **ORM改进：**前者增强ORM功能，如WhereBtween，WhereIn之类的；后者偏弱。
- **组件更新：**前者更新了组件，后者组件还是旧的。
- **安全性：**输入过滤数据验证机制，安全性比较弱。

# 二、Larave

## 2.1、ThinkPHP与Laravel的区别？

1. **设计理念：**

   - Laravel更加简洁，优雅和可读性，倾向于使用现代码的技术和设计模式。
   - ThinkPHP注重实用性和易用性，更加传统。

2. **社区生态：**

   - Laravel拥有庞大的全球社区和丰富的生态系统，可以找到各种文档，教程和拓展包。
   - ThinkPHP在中国地区的使用率很高，相对于前者生态系统很小。

3. **ORM：**

   - Laravel使用Eloquent ORM作为对象光系映射工具提供方便的数据库操作和模型关联功能。
   - ThinkPHP使用自带的ORM，功能相对简单。

4. **路由：**

   - Laravel的路由系统更加灵活和强大，可以支持各种路由模式和参数约束。
   - ThinkPHP的路由系统相对简单，功能较为基础。

5. **拓展性：**

   - Laravel提供了丰富的拓展包和组件，可以轻松集成第三方服务和库。
   - ThinkPHP也有一些拓展包，但是相比Laravel相对较少。

   **备注：**总体而言，Laravel更适合开发大型项目和复杂的程序，ThinkPHP适合开发中小型项目和快速开发，选择那个框架取决于项目需求、开发经验和团队技术栈方向。

## 2.2、Laravel是什么？

- 是一个基于PHP的开源Wen应用框架，采用MVC架构，他的目的是简化Web开发过程，提高代码的可用性，提供了丰富的功能，包括路由，数据库迁移、队列、缓存、认证。

## 2.3、什么是Laravel的服务容器？

- 服务容器是一个强大的工具，用于管理类的依赖解析和注入，它是构建大型应用的基础，它允许开发者通过容器进行依赖解析和注入，简化对象的创建和管理。

## 2.4、Laravel的中间件是什么？他的作用是什么？

- **中间件：** 中间件是Laravel中用于过滤HTTP请求的组件。
- **作用：**它们可以在请求进入应用程序之前和响应发送到客户端之前执行特定的任务，如认证、日志记录，CORS处理等，中间可以全局应用路由，也可以指定应用某些路由或者路由组。

## 2.5、Laravel的Eloquent ORM是什么？

- 是Laravel自带对象印象关系工具，它通过Active Record模式来简化数据库操作，每个数据对应每个模型类，通过模型类可以进行数据库的CURD操作，并且提供了强大的查询构构建器和关系管理功能。

## 2.6、Laravel的迁移是什么？

- 迁移时Laravel中用于管理数据库结构的工具，它提供了一种版本控制的方式来创建和修改数据库表，迁移文件时PHP类，通过定义up和down方法来描述数据库表的创建和回滚操作。

## 2.7、Laravel中的表单请求验证如何实现的？

- Laravel提供了多种方式来进行表单请求验证，可以在控器中使用validate方法，也可以独立创建表单请求来定义验证 。

## 2.8、Laravel中的事件和监听器是什么？如何使用？

- **监听器：**时间和监听器时Laravel中的事件驱动编程机制，用于解耦和管理应用程序中的重要要操作，事件时应用程序中发生的动作，监听器是先赢这些事件的处理器，可以使用 `php arisan make:event`和`php artisan make:listener`命令来创建时间和监听器，并在`EventServiceProvider`中注册它们。

## 2.9、Laravel中的队列时什么？如何使用？

- **队列：**队列用于耗时的任务推迟到后台处理，从而提高应用的相应的响应速度，Laravel支持多种队列驱动，包括Redis、数据库等，可以使用`php artisan make:job` 命令创建队列任务，并通过 dispatch 方法任务推送到队列中。

# 三、Sfmfony

**简介：**Symfony是一个构建Web应用程序的PHP框架，提供了广泛的工具和组件来加速开发过程，遵从MVC。

## 3.1、主要组件有哪些？

1. **HttpFoundation：**处理HTTP请求和响应。
2. **HttpKernel：**驱动请求-响应应急处理机制。
3. **Routing：**管理URL路径和控制器之间的映射。
4. **Form：**提供表单创建和处理工具。
5. **Security：**提供认证、授权和其他安全功能。
6. **Validator：**验证数据和对象。
7. **Twig：**强大的模板引擎，用于生产HTML。
8. **Doctrine ORM：**提供数据库操作抽象层。

## 3.2、如何配置数据库连接？

1. 在`.env`文件中配置数据库连接参数即可，具体效果如下：

   `DATABSE_URL="mysql://db_user:db_user:db_password@127.0.0.1:3306/db_name"`

## 3.3、Sfmfony框架的主要特性是什么？

1. **可重用性：**组件独立且可重用的组件组成，这些组件可以单独使用。
2. **模块化设计：**应用程序可以通过Bundles模块化，每个Bundle负责一个特定的功能。
3. **高性能：**经过优化，具有高性能和低延迟。
4. **灵活性：**提供多种配置方式，适应不同的开发需求。
5. **强大的社区支持：**有一个或缺的开发者社区和丰富的文档资源。

## 3.4、Sfmfony的事件调度器是什么？它是如何工作的？

1. 事件调度器是一个组件，用于在应用程序不同部分的耦合通信，通过分发事件和调用相应的事件监听器来工作。
2. 定义事件、创建事件监听器、注册监听器到时间调度器。

# 四、Workeman

# 五、Swoole 

## 5.1、Swoole的底层是什么？

**简介：**基于C语言高性能异步网络框架，通过关键技术构建高效的功能：

- **异步非阻塞I/O：**一个线程多个连接，不会等待某个操作阻塞整个线程。
- **多进程和多线程支持：**支持多线程和多进程，可以利用系统的多核CPU来提高并发处理能力，每个进程可以处理多个客户端连接，形成高并发处理能力。
- **协程支持：**实现异步的并发处理，协程通过轻量级线程来实现，从而提高代码的可读性。
- **内存管理：**提高了高效的内存管理机制，内存池内存共享功能，以及减少内存碎片的提高性能。
- **协议支持：**支持TCP\UDP\HTTP\WebSocker等。



